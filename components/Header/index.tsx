import {
  ActionIcon,
  Avatar,
  Button,
  Menu,
  useMantineTheme,
} from "@mantine/core";
import {
  Settings,
  DoorExit,
  LayoutDashboard,
  ArrowNarrowRight,
} from "tabler-icons-react";
import { useRouter } from "next/router";
import styles from "./Header.module.css";
import * as Api from "@/api";

interface HeaderProps {
  isDashboard?: boolean;
}

const Header: React.FC<HeaderProps> = ({ isDashboard }) => {
  const theme = useMantineTheme();
  const router = useRouter();
  const onClickLogout = () => {
    Api.auth.logout();
    location.href = "/dashboard";
  };
  return (
    <header className={`${styles.header}`}>
      <div></div>
      <svg
        width="183"
        height="40"
        viewBox="0 0 183 40"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M59.3398 31.2461C56.832 31.2461 54.8438 30.457 53.375 28.8789C51.9062 27.3008 51.1719 25.1211 51.1719 22.3398C51.1719 19.6992 51.9375 17.582 53.4688 15.9883C55.0078 14.3867 57.0195 13.5859 59.5039 13.5859C61.5117 13.5859 63.2109 14.0508 64.6016 14.9805L63.6055 17.3828C62.2695 16.5625 60.9258 16.1523 59.5742 16.1523C57.9961 16.1523 56.7461 16.7227 55.8242 17.8633C54.9102 18.9961 54.4531 20.5195 54.4531 22.4336C54.4531 24.418 54.8945 25.9531 55.7773 27.0391C56.668 28.125 57.9336 28.668 59.5742 28.668C61.0117 28.668 62.4375 28.3086 63.8516 27.5898L64.2734 30.0742C62.9609 30.8555 61.3164 31.2461 59.3398 31.2461ZM71.3281 31.1758C70.4453 31.1758 69.7109 31.0742 69.125 30.8711C68.5469 30.6602 68.0898 30.3281 67.7539 29.875C67.418 29.4219 67.1836 28.8828 67.0508 28.2578C66.918 27.6328 66.8516 26.8555 66.8516 25.9258V13.375L69.9219 13.1758V25.8672C69.9219 27.0234 70.0586 27.8086 70.332 28.2227C70.6055 28.6289 71.1367 28.832 71.9258 28.832C72.3164 28.832 72.8125 28.7891 73.4141 28.7031L73.4961 30.8945C73.4883 30.8945 73.3906 30.9141 73.2031 30.9531C73.0234 30.9922 72.8477 31.0234 72.6758 31.0469C72.5117 31.0781 72.3008 31.1055 72.043 31.1289C71.7852 31.1602 71.5469 31.1758 71.3281 31.1758ZM80.5625 28.9141C81.6016 28.9141 82.3828 28.5352 82.9062 27.7773C83.4297 27.0195 83.6914 25.9336 83.6914 24.5195C83.6914 23.0898 83.4297 22 82.9062 21.25C82.3828 20.5 81.5938 20.125 80.5391 20.125C79.5 20.125 78.7148 20.5039 78.1836 21.2617C77.6602 22.0117 77.3984 23.1016 77.3984 24.5312C77.3984 25.9375 77.6641 27.0195 78.1953 27.7773C78.7266 28.5352 79.5156 28.9141 80.5625 28.9141ZM80.4805 31.2461C78.5742 31.2461 77.0742 30.6289 75.9805 29.3945C74.8867 28.1602 74.3398 26.5352 74.3398 24.5195C74.3398 22.4414 74.8867 20.8047 75.9805 19.6094C77.0742 18.4062 78.6172 17.8047 80.6094 17.8047C82.5312 17.8047 84.0352 18.418 85.1211 19.6445C86.2148 20.8633 86.7617 22.4883 86.7617 24.5195C86.7617 26.5742 86.2109 28.2109 85.1094 29.4297C84.0078 30.6406 82.4648 31.2461 80.4805 31.2461ZM98.5625 29.9922C97.5391 30.8281 96.1914 31.2461 94.5195 31.2461C92.8477 31.2461 91.5 30.8281 90.4766 29.9922C89.4609 29.1562 88.9531 27.9297 88.9531 26.3125V18.1211H92.0352V26.1953C92.0352 27.1562 92.2344 27.8516 92.6328 28.2812C93.0391 28.7109 93.6797 28.9258 94.5547 28.9258C95.4141 28.9258 96.0391 28.7148 96.4297 28.293C96.8281 27.8633 97.0273 27.1641 97.0273 26.1953V18.1211H100.098V26.3125C100.098 27.9219 99.5859 29.1484 98.5625 29.9922ZM107.703 31.2461C106.023 31.2461 104.703 30.6289 103.742 29.3945C102.781 28.1602 102.301 26.5117 102.301 24.4492C102.301 22.4492 102.777 20.8438 103.73 19.6328C104.691 18.4141 106.012 17.8047 107.691 17.8047C109.52 17.8047 110.812 18.4531 111.57 19.75C111.492 18.9844 111.453 18.2461 111.453 17.5352V13.375L114.523 13.1758V31H111.863L111.523 29.2422C111.391 29.4531 111.266 29.6367 111.148 29.793C111.039 29.9414 110.875 30.1172 110.656 30.3203C110.438 30.5156 110.199 30.6758 109.941 30.8008C109.691 30.918 109.371 31.0195 108.98 31.1055C108.598 31.1992 108.172 31.2461 107.703 31.2461ZM108.43 28.9141C110.492 28.9141 111.539 27.5117 111.57 24.707C111.57 23.1211 111.305 21.9648 110.773 21.2383C110.242 20.5117 109.449 20.1484 108.395 20.1484C107.473 20.1484 106.734 20.5195 106.18 21.2617C105.633 21.9961 105.359 23.082 105.359 24.5195C105.359 25.9492 105.633 27.0391 106.18 27.7891C106.734 28.5391 107.484 28.9141 108.43 28.9141ZM127.508 28.457H129.781C131.742 28.457 133.234 27.9453 134.258 26.9219C135.281 25.8906 135.793 24.3906 135.793 22.4219C135.793 20.3125 135.266 18.7812 134.211 17.8281C133.156 16.8672 131.566 16.3867 129.441 16.3867H127.508V28.457ZM124.332 31V13.832H129.301C130.801 13.832 132.145 14.0039 133.332 14.3477C134.52 14.6914 135.539 15.2109 136.391 15.9062C137.25 16.5938 137.906 17.4844 138.359 18.5781C138.82 19.6641 139.051 20.9219 139.051 22.3516C139.051 25.125 138.215 27.2617 136.543 28.7617C134.871 30.2539 132.555 31 129.594 31H124.332ZM141.781 31V18.1211H144.359L144.758 20.0898C145.602 18.7383 146.824 18.0625 148.426 18.0625C148.762 18.0625 149.035 18.0781 149.246 18.1094L149.199 20.6758C148.887 20.6289 148.562 20.6055 148.227 20.6055C147.094 20.6055 146.246 20.9062 145.684 21.5078C145.129 22.1094 144.852 22.9453 144.852 24.0156V31H141.781ZM151.191 31V18.1211H154.262V31H151.191ZM151.191 16.2461V13.6211H154.273V16.2461H151.191ZM161.082 31L155.949 18.1211H159.207C159.332 18.4727 159.727 19.5664 160.391 21.4023C161.062 23.2305 161.508 24.4766 161.727 25.1406C162.172 26.4375 162.492 27.418 162.688 28.082C162.688 28.0742 162.754 27.8203 162.887 27.3203C163.02 26.8203 163.145 26.3516 163.262 25.9141C163.387 25.4688 163.465 25.1992 163.496 25.1055C163.504 25.0898 163.859 24.0117 164.562 21.8711C165.273 19.7305 165.695 18.4805 165.828 18.1211H169.062L164.188 31H161.082ZM176.527 31.2461C174.457 31.2461 172.844 30.6523 171.688 29.4648C170.539 28.2695 169.965 26.6211 169.965 24.5195C169.965 22.4727 170.508 20.8438 171.594 19.6328C172.68 18.4219 174.16 17.8125 176.035 17.8047C177.809 17.8047 179.184 18.3594 180.16 19.4688C181.145 20.5781 181.637 22.0508 181.637 23.8867C181.637 24.0195 181.633 24.2344 181.625 24.5312C181.625 24.8281 181.625 25.0469 181.625 25.1875H173.059C173.09 26.3906 173.418 27.3242 174.043 27.9883C174.676 28.6445 175.543 28.9727 176.645 28.9727C178.051 28.9727 179.402 28.6055 180.699 27.8711L181.133 30.0508C179.844 30.8477 178.309 31.2461 176.527 31.2461ZM173.117 23.2539H178.742C178.742 22.207 178.504 21.4023 178.027 20.8398C177.551 20.2773 176.891 19.9961 176.047 19.9961C175.258 19.9961 174.59 20.2695 174.043 20.8164C173.504 21.3633 173.195 22.1758 173.117 23.2539Z"
          fill="#19191B"
        />
        <g clipPath="url(#clip0_2_204)">
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M32.8909 14.4808C32.8909 14.4808 31.4849 10.8471 27.7729 8.36313C19.2089 2.62913 7.46094 7.87907 6.12894 18.1991C6.11894 18.2751 6.0089 18.279 6.0709 18.263C2.2629 19.211 -0.475057 22.8611 0.0689431 27.0711C0.800943 32.7451 7.99894 35.6509 7.99894 31.8949C7.99894 29.5849 7.15894 30.3092 5.57694 29.1332C1.40694 26.0332 6.21093 19.5011 10.4729 22.8871C7.85693 14.2711 16.9729 7.10113 24.6249 11.1551C27.3529 12.5991 29.2349 15.2272 29.7989 18.0272C35.4709 17.8232 38.8369 25.5647 32.9669 29.1087C32.3729 29.4667 31.9989 30.111 31.9989 30.805C31.9989 32.279 33.5809 33.3008 34.8689 32.5848C35.4729 32.2508 36.0409 31.859 36.5609 31.411C42.5549 26.257 40.3269 16.7388 32.8909 14.4808ZM27.9989 32.3451V32.2308C27.9989 32.2448 27.9929 32.2549 27.9929 32.2669C27.9929 32.2929 27.9989 32.3191 27.9989 32.3451ZM27.9929 32.2669C27.9709 33.3489 27.0909 34.0072 26.0009 34.0072H13.9989C10.8849 34.0072 11.8189 30.0072 13.9989 30.0072H26.0009C27.0789 30.0072 27.9529 31.1829 27.9929 32.2669Z"
            fill="#008FFD"
          />
        </g>
        <defs>
          <clipPath id="clip0_2_204">
            <rect width="40" height="40" fill="white" />
          </clipPath>
        </defs>
      </svg>
      {isDashboard ? (
        <Menu shadow="md" width={150}>
          <Menu.Target>
            <div className={`${styles.header__avatar}`}>
              <Avatar src={null} radius="xl" />
              <svg
                width="9"
                height="5"
                viewBox="0 0 9 5"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fillRule="evenodd"
                  clipRule="evenodd"
                  d="M0.160078 1.29999C0.280907 1.14241 0.459301 1.03917 0.656136 1.01293C0.852972 0.986681 1.05218 1.03957 1.21008 1.15999L4.00008 3.29999L6.80008 1.14999C6.87686 1.07835 6.96783 1.02364 7.06709 0.989383C7.16636 0.955131 7.27172 0.942106 7.37634 0.951152C7.48096 0.960199 7.58251 0.991114 7.67443 1.0419C7.76635 1.09268 7.84657 1.1622 7.90991 1.24596C7.97326 1.32971 8.01831 1.42583 8.04215 1.5281C8.06599 1.63037 8.06808 1.73651 8.0483 1.83964C8.02852 1.94277 7.98731 2.0406 7.92732 2.12679C7.86733 2.21298 7.78992 2.28562 7.70008 2.33999L4.46008 4.83999C4.19008 5.03999 3.81008 5.03999 3.54008 4.83999L0.300078 2.34999C0.144023 2.2277 0.0427423 2.04858 0.0183811 1.85182C-0.00598004 1.65506 0.0485611 1.45665 0.170078 1.29999H0.160078Z"
                  fill="#19191B"
                />
              </svg>
            </div>
          </Menu.Target>
          <Menu.Dropdown>
            <Menu.Item
              icon={<LayoutDashboard size={14} />}
              onClick={() => router.push("/dashboard")}
            >
              Dashboard
            </Menu.Item>
            <Menu.Item
              icon={<Settings size={14} />}
              onClick={() => router.push("/dashboard/profile")}
            >
              Profile
            </Menu.Item>
            <Menu.Divider />
            <Menu.Item icon={<DoorExit size={14} />} onClick={onClickLogout}>
              Exit
            </Menu.Item>
          </Menu.Dropdown>
        </Menu>
      ) : (
        <Button
          variant="outline"
          color="gray"
          radius="xl"
          onClick={() => router.push("/dashboard/login")}
        >
          Login
        </Button>
      )}
    </header>
  );
};

export default Header;
